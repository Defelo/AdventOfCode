&fras ⊣ &args

°$"_\n\n_"
⊜∘⊸≠@\n
▽⊸∊"<>^v":
⊏⊗⊙("v>^<"⊂⟜¯⋯1_2)

Next ← (
  ⊙⊙⍜⊡⋅1⟜:
  ⊡◡⊙⋅⋅⋅∘
  :↯⊙(+◡⋅⊙⋅⋅∘)⊸∊"@O[]"
  ⊂⨬(⊂+0_1|⊂-0_1|◌)⊗⊙("[]":)
)
Targets ← ⊚⋅⊙⋅◌⍢(⨬(Next|◌)⊡◡⊙⋅∘°⊂|≠0⧻) ¤⊙(∵⋅0,)
Move ← (
  ⊙◌◡Targets:
  °0/↥=@#⊡◡⊙⋅∘
  ▽≠@.⊡◡⊙⋅∘
  ⍜⊡◌+¤⊙(⟜⍜⊡≡(@.∘)):
)
Solve  ← /+♭×¤100_1⊚∊"O[" ◌∧⍣(⊃+Move|◌) ⊙(⊢⊚⊸=@@)
Expand ← ⍜⍉♭₂⨬(".."|"##"|"@."|"[]")∵(⊗⊙".#@O")

∩Solve ,Expand,
